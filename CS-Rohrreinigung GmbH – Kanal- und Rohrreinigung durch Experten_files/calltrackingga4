(function(){var trackingId="";var apiURL="";var baseNumbers=[];var ddis={};var registerCount=0;register();function register(){try{var script=document.querySelector("script[src*\x3d'livewebservice/calltrackingga4']");var match=script.src.match(/((?:http|https):\/\/[\d\w\.]+)\/.*baseNumbers=(.*)/);apiURL=match[1];baseNumbers=decodeURIComponent(match[2]).split(",")}catch(error){console.error("Could not get apiURL or baseNumbers!",error)}try{var scripts=document.querySelectorAll("script[src^\x3d'https://www.googletagmanager.com/gtag/js']");
for(var i=0;i<scripts.length;i++){var match=scripts[i].src.match(/id=(G-[a-zA-Z0-9]+)/);if(match!==null){trackingId=match[1];break}}}catch(error){console.error("Could not get Google Analytics trackingId",error)}if(trackingId!==""&&apiURL!==""&&baseNumbers.length>0)gtag("get",trackingId,"client_id",function(clientId){var request=new XMLHttpRequest;request.onreadystatechange=function(){if(request.readyState==4&&request.status==200){ddis=JSON.parse(request.responseText);parsePhoneNumbers()}else if(request.readyState==
4)console.error("Request failed with HTTP",request.status,request.statusText)};request.open("POST",apiURL+"/livewebservice/calltrackingdynamic",true);request.send(JSON.stringify({"trackingId":trackingId,"uniqueIdentifier":clientId,"numbers":baseNumbers,"url":location.href}))});else if(trackingId===""&&registerCount<100){registerCount++;setTimeout(register,100)}else console.error("Google Analytics could not be found!")}function parsePhoneNumbers(){for(var i=0;i<baseNumbers.length;i++){var baseNumber=
baseNumbers[i];if(baseNumber in ddis===false)continue;var ddi=ddis[baseNumber];var a=document.querySelectorAll("a[href^\x3d'tel:"+baseNumber+"']");if(a.length>0)for(var j=0;j<a.length;j++){a[j].href=a[j].href.substring(0,a[j].href.length-ddi.length)+ddi;var textNode=a[j].querySelectorAll(".mrsCallTracking");if(textNode.length>0)for(var node=0;node<textNode.length;node++)textNode[node].textContent=replaceBaseDDI(textNode[node].textContent,ddi);else a[j].innerHTML=replaceBaseDDI(a[j].innerHTML,ddi)}}}
function replaceBaseDDI(baseNumber,newDDI){var DDILen=newDDI.length;var zeros="0000000000";var baseDDI=zeros.substring(0,DDILen);var numberLen=baseNumber.length;var x=0;while(baseNumber.substring(numberLen-DDILen-x,numberLen-x)!=baseDDI){if(x>=numberLen)return baseNumber;x++}return baseNumber.substring(0,numberLen-DDILen-x)+newDDI}window.calltracking={parsePhoneNumbers:parsePhoneNumbers}})();